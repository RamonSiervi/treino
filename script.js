
// DATA
window.__TRAINING__ = [
// ===== TREINO DE QUADRÍCEPS =====
{
  "title": "Treino de Quadríceps",
  "items": [
    {
      "name": "Agachamento Sumô com Halteres",
      "series": "3x10/10/10 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-sumo-squat-front.mp4"
    },
    {
      "name": "Leg Press 45º",
      "series": "4x15 (pés colados) + 15 (afastados)",
      "load": "12 kg",
      "rest": "40s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-leg-press-front.mp4"
    },
    {
      "name": "Adução de Quadril Máquina",
      "series": "3x10/10/10 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-machine-hip-adduction-front.mp4"
    },
    {
      "name": "Cadeira Flexora",
      "series": "3x10/10/10 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-seated-leg-curl-side.mp4"
    },
    {
      "name": "Cadeira Flexora Unilateral",
      "series": "3x10/10/10/10 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Seated_Leg_Curl_FR_1080.mp4"
    },
    {
      "name": "Panturrilha no Step",
      "series": "4x15",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-calves-stretch-variation-3-side.mp4"
    },
    {
      "name": "Abdominal Canivete",
      "series": "4x15",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-suitcase-crunch-side.mp4"
    },
    {
      "name": "Esteira Caminhada",
      "series": "30 reps",
      "load": "-",
      "rest": "-",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-treadmill-walk-side.mp4"
    }
  ]
},
// ===== TREINO DE POSTERIOR E GLÚTEO =====
{
  "title": "Treino de Posterior e Glúteo",
  "items": [
    {
      "name": "Agachamento com Halteres",
      "series": "3x10+10+10 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-front-rack-squat-side.mp4"
    },
    {
      "name": "Abdução de Quadril Máquina",
      "series": "3x10+10+10 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-machine-hip-abduction-front.mp4"
    },
    {
      "name": "Elíptico",
      "series": "25 reps",
      "load": "0 kg",
      "rest": "-",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-elliptical-side.mp4"
    },
    {
      "name": "Afundo com Barra Livre",
      "series": "3x12, 3x10, 2x8",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-barbell-reverse-lunge-side.mp4"
    },
    {
      "name": "Agachamento Sumô no Step com Halteres",
      "series": "3x10+10+10 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/dumbbells/_1080/DB_Sumo_Squat_FR_1080.mp4"
    },
    {
      "name": "Abdução de Quadril Máquina (2ª vez)",
      "series": "3x10+10+10 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Hip_Abduction_FR_1080.mp4"
    },
    {
      "name": "Cadeira Extensora",
      "series": "3x10+10+10 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-machine-leg-extension-side.mp4"
    },
    {
      "name": "Cadeira Extensora Unilateral",
      "series": "3x10+10+10 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Single_Leg_Extension_FR_1080.mp4"
    },
    {
      "name": "Leg Press 45º Unilateral",
      "series": "3x12, 3x10, 2x8",
      "load": "0 kg",
      "rest": "60s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Leg_Press_FR_1080.mp4"
    }
  ]
},
// ===== TREINO DE PEITO, TRÍCEPS E BÍCEPS =====
{
  "title": "Treino de Peito, Tríceps e Bíceps",
  "items": [
    {
      "name": "Alongamento de Ombros e Tríceps II",
      "series": "3x20",
      "load": "0 kg",
      "rest": "-",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-shoulders-stretch-variation-1-front.mp4"
    },
    {
      "name": "Bike Spinning Sentada",
      "series": "40 reps",
      "load": "-",
      "rest": "-",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-stationary-bike-side.mp4"
    },
    {
      "name": "Abdominal Supra Solo",
      "series": "5x15",
      "load": "0 kg",
      "rest": "40s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/bodyweight/_1080/Crunch_FR_1080.mp4"
    },
    {
      "name": "Tríceps Unilateral na Polia Alta (Pegada Neutra)",
      "series": "3x15",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Cables-cable-single-arm-rope-pushdown-side.mp4"
    },
    {
      "name": "Alongamento de Peitoral no Espaldar",
      "series": "3x15",
      "load": "0 kg",
      "rest": "40s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-chest-stretch-variation-1-side.mp4"
    },
    {
      "name": "Mobilidade de Ombro III",
      "series": "3x20",
      "load": "0 kg",
      "rest": "-",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Recovery-thoracic-extensions-via-shoulder-flexion-foam-roller-front.mp4"
    },
    {
      "name": "Rosca Alternada com Halteres",
      "series": "3x15",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-curl-side.mp4"
    },
    {
      "name": "Tríceps na Polia com Corda (lento + curto)",
      "series": "3x15 lento + 15 curto",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Cables-cable-push-down-side.mp4"
    },
    {
      "name": "Crucifixo com Halteres",
      "series": "4x12",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-incline-chest-fly-front.mp4"
    },
    {
      "name": "Crucifixo Inclinado com Halteres",
      "series": "4x12",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-incline-chest-flys-side.mp4"
    },
    {
      "name": "Rosca Martelo com Halteres",
      "series": "4x12",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-hammer-curl-side.mp4"
    }
  ]
},
// ===== TREINO DE OMBRO E COSTAS =====
{
  "title": "Treino de Ombro e Costas",
  "items": [
    {
      "name": "Puxada Alta (pegada neutra)",
      "series": "3x10/8/6 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Lat_Pulldown_Neutral_FR_1080.mp4"
    },
    {
      "name": "Abdominal Canivete",
      "series": "3x12",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/bodyweight/_1080/V-Up_FR_1080.mp4"
    },
    {
      "name": "Esteira Caminhada",
      "series": "40 reps",
      "load": "-",
      "rest": "-",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-treadmill-walk-side.mp4"
    },
    {
      "name": "Elevação Lateral Unilateral Sentado com Halteres",
      "series": "3x10/8/6 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-seated-overhead-press-front.mp4"
    },
    {
      "name": "Elevação Frontal Alternada",
      "series": "3x12",
      "load": "4 a 6 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-front-raise-side.mp4"
    },
    {
      "name": "Desenvolvimento com Halteres (pegada neutra)",
      "series": "3x10/8/6 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/dumbbells/_1080/Neutral_Grip_DB_Press_FR_1080.mp4"
    },
    {
      "name": "Puxada Neutra Triângulo",
      "series": "3x10/8/6 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/cables/_1080/Seated_Row_V_Grip_FR_1080.mp4"
    },
    {
      "name": "Remada Baixa Triângulo",
      "series": "3x10/8/6 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-machine-seated-cable-row-front.mp4"
    },
    {
      "name": "Puxada Aberta Barra Reta",
      "series": "3x10/8/6 (Drop – faz tudo e conta como 1 série)",
      "load": "0 kg",
      "rest": "30s",
      "demo": "https://media.musclewiki.com/media/uploads/videos/branded/female-machine-pulldown-side.mp4"
    }
  ]
}
];

// Render
const app = document.getElementById('app');
const data = window.__TRAINING__ || [];

function createExerciseCard(ex) {
  const card = document.createElement('div');
  card.className = 'card';

  const info = document.createElement('div');
  info.className = 'info';

  const h3 = document.createElement('h3');
  h3.textContent = ex.name;
  info.appendChild(h3);

  const meta = document.createElement('div');
  meta.className = 'meta';

  const s = document.createElement('span');
  s.className = 'tag'; s.innerHTML = '<strong>Séries:</strong> ' + ex.series;
  const c = document.createElement('span');
  c.className = 'tag'; c.innerHTML = '<strong>Carga:</strong> ' + ex.load;
  if (ex.rest && ex.rest !== '-') {
    const r = document.createElement('span');
    r.className = 'tag'; r.innerHTML = '<strong>Intervalo:</strong> ' + ex.rest;
    meta.appendChild(r);
  }
  meta.prepend(c); meta.prepend(s);
  info.appendChild(meta);

  const links = document.createElement('div');
  links.className = 'links';
  if (ex.demo) {
    const a = document.createElement('a');
    a.href = ex.demo; a.target = '_blank'; a.rel = 'noopener';
    a.textContent = 'Abrir vídeo de exemplo';
    links.appendChild(a);
  }
  info.appendChild(links);

  const thumb = document.createElement('div');
  thumb.className = 'thumb';

  if (ex.demo && (ex.demo.endsWith('.mp4') || ex.demo.endsWith('.webm'))) {
    const v = document.createElement('video');
    v.src = ex.demo;
    v.controls = true;
    v.muted = true;
    v.playsInline = true;
    v.preload = 'metadata';
    thumb.appendChild(v);
  } else if (ex.gif) {
    const img = document.createElement('img');
    img.src = ex.gif;
    img.alt = ex.name;
    thumb.appendChild(img);
  } else {
    const ph = document.createElement('div');
    ph.textContent = 'Sem mídia';
    ph.style.color = '#64748b';
    thumb.appendChild(ph);
  }

  card.appendChild(info);
  card.appendChild(thumb);
  return card;
}


// atribuir classes de cor conforme o título
function sectionClassFromTitle(title){
  if(title.toLowerCase().includes("quadrí")) return "quads";
  if(title.toLowerCase().includes("posterior")) return "posterior";
  if(title.toLowerCase().includes("peito")) return "peito";
  if(title.toLowerCase().includes("ombro")) return "ombro";
  return "";
}

function createSection(sec, idx) {
  const section = document.createElement('section');
  section.className = 'section ' + sectionClassFromTitle(sec.title);

  const header = document.createElement('div');
  header.className = 'section-header';

  const title = document.createElement('div');
  title.className = 'section-title';
  const badge = document.createElement('div');
  badge.className = 'badge';
  badge.textContent = '⚡';
  const h2 = document.createElement('h2');
  h2.textContent = sec.title;
  h2.style.margin='0'; h2.style.fontSize='18px';
  title.appendChild(badge); title.appendChild(h2);

  const toggle = document.createElement('div');
  toggle.className = 'section-toggle';
  toggle.textContent = '–';
  toggle.addEventListener('click', () => {
    body.style.display = (body.style.display === 'none') ? 'grid' : 'none';
    toggle.textContent = (body.style.display === 'none') ? '+' : '–';
  });

  header.appendChild(title);
  header.appendChild(toggle);

  const body = document.createElement('div');
  body.className = 'section-body';

  sec.items.forEach(ex => body.appendChild(createExerciseCard(ex)));

  section.appendChild(header);
  section.appendChild(body);
  return section;
}

data.forEach((sec, i) => app.appendChild(createSection(sec, i)));

// Export PDF (texto + links) — mais compatível com vídeos externos
document.getElementById('btnExport').addEventListener('click', async () => {
  const { jsPDF } = await import('https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js');
  const doc = new jsPDF({ unit: 'pt', format: 'a4' });
  const margin = 36;
  let y = margin;

  doc.setFont('helvetica', 'bold');
  doc.setFontSize(16);
  doc.text('Plano de Treinos', margin, y);
  y += 10;
  doc.setFont('helvetica', 'normal');
  doc.setFontSize(10);
  doc.text('Exportado (nomes, séries, cargas, intervalos e link da demo).', margin, y);
  y += 16;

  const pageH = doc.internal.pageSize.getHeight();
  const line = (t) => { doc.text(t, margin, y); y += 12; if (y > pageH - margin) { doc.addPage(); y = margin; } };

  data.forEach((sec) => {
    line('');
    doc.setFont('helvetica', 'bold'); doc.setFontSize(13);
    line('• ' + sec.title);
    doc.setFont('helvetica', 'normal'); doc.setFontSize(11);

    sec.items.forEach((ex, i) => {
      line(`${i+1}. ${ex.name}`);
      line(`   Séries: ${ex.series}`);
      line(`   Carga: ${ex.load}` + (ex.rest && ex.rest !== '-' ? ` | Intervalo: ${ex.rest}` : ''));
      if (ex.demo) line(`   Demo: ${ex.demo}`);
      line('');
    });
  });

  doc.save('plano-de-treinos.pdf');
});


// ====== Tema Claro/Escuro ======
const root = document.documentElement;
const btnTheme = document.getElementById('btnTheme');
function applyTheme(mode){
  if(mode==='dark'){ root.classList.add('dark'); btnTheme.textContent='☀️ Alternar Tema'; }
  else{ root.classList.remove('dark'); btnTheme.textContent='🌙 Alternar Tema'; }
  localStorage.setItem('theme', mode);
}
btnTheme.addEventListener('click', ()=>{
  const isDark = root.classList.contains('dark');
  applyTheme(isDark?'light':'dark');
});
(function(){ const saved=localStorage.getItem('theme'); if(saved) applyTheme(saved); })();


// ====== Exportar PDF ======
const btnExport = document.getElementById('btnExport');
btnExport.addEventListener('click', ()=>{
  const element = document.getElementById('app');
  const opt = {
    margin:       0.5,
    filename:     'plano-de-treinos.pdf',
    image:        { type: 'jpeg', quality: 0.98 },
    html2canvas:  { scale: 2 },
    jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
  };
  html2pdf().set(opt).from(element).save();
});
